"use strict";(self.webpackChunktheme_raed=self.webpackChunktheme_raed||[]).push([[413,969],{144:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(944);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||(0,r.A)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},413:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var r=n(144),a=n(29),c=n(517),o=function(){return(0,c.A)(function e(){(0,a.A)(this,e),this.brands=new Map,this.selectedBrands=new Set,this.init()},[{key:"init",value:function(){var e=this;this.isCategoryPage()&&this.waitForProducts().then(function(){e.collectBrands(),e.createBrandFilter(),e.attachEvents()})}},{key:"isCategoryPage",value:function(){return window.location.pathname.includes("/category/")||document.querySelector(".s-products-list")}},{key:"waitForProducts",value:function(){return new Promise(function(e){document.querySelector(".s-products-list-item")?e():new MutationObserver(function(t,n){document.querySelector(".s-products-list-item")&&(n.disconnect(),e())}).observe(document.body,{childList:!0,subtree:!0})})}},{key:"collectBrands",value:function(){var e=this;this.brands.clear(),document.querySelectorAll(".s-products-list-item").forEach(function(t){var n,r=t.dataset.productBrand||(null===(n=t.querySelector(".product-brand"))||void 0===n||null===(n=n.textContent)||void 0===n?void 0:n.trim());r&&e.brands.set(r,(e.brands.get(r)||0)+1)})}},{key:"createBrandFilter",value:function(){var e=document.querySelector(".brand-filter-section");if(e&&0!==this.brands.size){var t=e.querySelector(".brand-filter-list");if(t){var n=Array.from(this.brands.entries()).sort(function(e,t){return t[1]-e[1]});t.innerHTML=n.map(function(e){var t=(0,r.A)(e,2),n=t[0],a=t[1];return'\n      <label class="brand-filter-item flex items-center py-2 hover:text-primary cursor-pointer">\n        <input type="checkbox" \n               class="brand-checkbox mr-2" \n               value="'.concat(n,'">\n        <span class="flex-1">').concat(n,'</span>\n        <span class="text-xs text-gray-500">(').concat(a,")</span>\n      </label>\n    ")}).join(""),this.attachBrandSearch()}}}},{key:"attachBrandSearch",value:function(){var e=document.getElementById("brand-search-input");e&&e.addEventListener("input",function(e){var t=e.target.value.toLowerCase();document.querySelectorAll(".brand-filter-item").forEach(function(e){var n=e.querySelector("span").textContent.toLowerCase();e.style.display=n.includes(t)?"":"none"})})}},{key:"attachEvents",value:function(){var e=this;document.addEventListener("change",function(t){t.target.classList.contains("brand-checkbox")&&e.handleBrandChange(t.target)});var t=document.querySelector(".clear-filters");t&&t.addEventListener("click",function(){return e.clearAllFilters()})}},{key:"handleBrandChange",value:function(e){var t=e.value;e.checked?this.selectedBrands.add(t):this.selectedBrands.delete(t),this.filterProducts(),this.updateClearButton()}},{key:"filterProducts",value:function(){var e=this,t=document.querySelectorAll(".s-products-list-item"),n=0;t.forEach(function(t){var r,a=t.dataset.productBrand||(null===(r=t.querySelector(".product-brand"))||void 0===r||null===(r=r.textContent)||void 0===r?void 0:r.trim()),c=0===e.selectedBrands.size||e.selectedBrands.has(a);t.style.display=c?"":"none",c&&n++}),this.updateProductCount(n)}},{key:"updateProductCount",value:function(e){var t=document.querySelector(".products-count span span");t&&(t.textContent=e)}},{key:"updateClearButton",value:function(){var e=document.querySelector(".clear-filters");e&&e.classList.toggle("hidden",0===this.selectedBrands.size)}},{key:"clearAllFilters",value:function(){this.selectedBrands.clear(),document.querySelectorAll(".brand-checkbox").forEach(function(e){e.checked=!1}),this.filterProducts(),this.updateClearButton()}}])}()}}]);